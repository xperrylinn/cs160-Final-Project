{% load static %}

<!DOCTYPE html>

<html>
	<head>
		<title>Home</title>

		<link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="{% static '/life/vendor/bootstrap/css/bootstrap.css' %}" />
		<link rel="stylesheet" type="text/css" href="{% static '/life/css/main.css' %}" />

		<script src="{% static '/life/vendor/jquery/jquery-3.3.1.min.js' %}"></script>
		<script src="{% static '/life/vendor/jquery-ui/jquery-ui.min.js' %}"></script>
	</head>
	<body>
		<!-- Your layout here -->
    <div class="container">
      
      <!-- Row -->
      <div class="row">
        <!-- Column -->
        <div class="col-lg-12">
          <!-- Form -->
           <div class="form-group">
             <label>Address</label>
             <input type="text" class="form-control" placeholder="Enter house address.." id="addressInput">
          </div>
          <!-- Form -->
        </div>
        <!-- Column -->
      </div>
      <!-- Row -->
      
      <!-- Row -->
      <div class="row">
        <!-- Column -->
        <div class="col-lg-12">
          <!-- Form -->
           <div class="form-group">
             <label>Price</label>
             <input type="text" class="form-control" placeholder="Enter house price.." id="priceInput">
          </div>
          <!-- Form -->
        </div>
        <!-- Column -->
      </div>
      <!-- Row -->

      <!-- Row -->
      <div class="row">
        <!-- Column -->
        <div class="col-lg-12">
          <!-- Form -->
           <div class="form-group">
             <label>Landlord:</label>
             <input type="text" class="form-control" placeholder="Enter landlord namne.." id="landlordInput">
          </div>
          <!-- Form -->
        </div>
        <!-- Column -->
      </div>
      <!-- Row -->
      <!-- Row -->
      <div class = "row">
        <div class = "col-lg-12">
            <button type="submit" class="btn btn-primary" id="submitButton">Submit</button>
        </div>
      </div>
      <!-- Row -->
    </div>
    <script>
    console.log("Hello World!");
    var postdata = null;
    var csrftoken = null;
      // using jQuery
    $(document).ready( function (){
      function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
          var cookies = document.cookie.split(';');
          for (var i = 0; i < cookies.length; i++) {
              var cookie = jQuery.trim(cookies[i]);
              // Does this cookie string begin with the name we want?
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
        }
        return cookieValue;
      }
      
    var csrftoken = getCookie('csrftoken');
    
    $("#submitButton").click( function(){
      var postdata = {
        'address': document.getElementById("addressInput").value,
        'price': document.getElementById("priceInput").value,
        'landlord': document.getElementById("landlordInput").value,
        'csrfmiddlewaretoken': csrftoken, 
      };
      console.log(postdata);
      $.ajax({
        url: "../../life/home/",
        method: "POST",
        headers: { "X-CSRFToken": csrftoken},
        data: JSON.stringify(postdata),
        contentType: "application/json",
        dataType: "json"
      });
    });
    });
    
    

      
    </script> 
  </body>
</html>